#############
# Desugared #
#############

constructor Bool : Type.

constructor True : Bool.

constructor False : Bool.

constructor Nat : Type.

constructor Z : Nat.

constructor S : (n :L Nat) -> Nat.

constructor Vect : Nat -> Type.

constructor Nil : Vect Z.

constructor Cons : (n :I Nat) -> Bool -> Vect n -> Vect (S n).

length : (n : Nat) -> Vect n -> Nat {
  length {Z} Nil ~> Z
  forall (n : Nat) (x : Bool) (xs : Vect n)
    length ({S} n) (Cons [n] x xs) ~> S (length n xs)
}

main :L Nat {
  main ~> length (S Z) (Cons Z True Nil)
}

#############
# Evarified #
#############

constructor Bool :0 Type.

constructor True :12 Bool.

constructor False :7 Bool.

constructor Nat :8 Type.

constructor Z :15 Nat.

constructor S :11 (n :L Nat) -> Nat.

constructor Vect :13 Nat -> Type.

constructor Nil :9 Vect Z.

constructor Cons :1 (n :I Nat) -> Bool -> Vect n -> Vect (S n).

length :16 (n :17 Nat) -> Vect n -> Nat {
  length {Z} Nil ~> Z
  forall (n :25 Nat) (x :24 Bool) (xs :22 Vect n)
    length ({S} n) (Cons [n] x xs) ~> S (length n xs)
}

main :L Nat {
  main ~> length (S Z) (Cons Z True Nil)
}

Running erasure inference...

########################
# Inferred constraints #
########################

Sums:
  I ≥ Sum
    product  [I]
    product  [I, 4]
    product  [I, 5, 6]
  L ≥ Sum
    product  [I]
  0 ≥ Sum
    product  [I]
    product  [I]
    product  [I]
    product  [I]
  1 ≥ Sum
    product  [35]
  2 ≥ Sum
    product  [I]
  3 ≥ Sum
    product  [I]
  8 ≥ Sum
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
  9 ≥ Sum
    product  [35, 38]
  11 ≥ Sum
    product  [I, 5]
    product  []
    product  [36]
  12 ≥ Sum
    product  [35, 39]
  13 ≥ Sum
    product  [I]
    product  [I]
    product  [I]
    product  [I]
    product  [I]
  14 ≥ Sum
    product  [I]
  15 ≥ Sum
    product  [I, 10]
    product  []
    product  [36, 37]
    product  [35, 40]
  16 ≥ Sum
    product  [32]
    product  []
  17 ≥ Sum
    product  [I]
    product  [I, 19]
  18 ≥ Sum
    product  [I]
  22 ≥ Sum
    product  [I]
    product  [32, 33]
  24 ≥ Sum
    product  [I]
    product  [I]
  25 ≥ Sum
    product  [I]
    product  [I]
    product  [I, 23]
    product  [I]
    product  [I]
    product  [32, 34]

Maxes:
  I ≥ Max
    product  [29]
    product  [40]
  L ≥ Max
    product  [6]
    product  [27]
    product  [32]
    product  [37]
  2 ≥ Max
    product  [30]
    product  [39]
  3 ≥ Max
    product  [31]
    product  [38]
  4 ≥ Max
    product  [14]
    product  [23]
    product  [10]
  5 ≥ Max
    product  [14]
    product  [19]
    product  [19]
  6 ≥ Max
    product  [L]
  10 ≥ Max
    product  [14]
    product  [19]
    product  [4]
  14 ≥ Max
    product  [10]
    product  [4]
    product  [5]
    product  [19]
    product  [23]
  17 ≥ Max
    product  [20]
    product  [26]
    product  [34]
    product  [36]
  18 ≥ Max
    product  [21]
    product  [28]
    product  [33]
    product  [35]
  19 ≥ Max
    product  [14]
    product  [10]
    product  [5]
    product  [23]
    product  [5]
  20 ≥ Max
    product  [I]
    product  [17]
  21 ≥ Max
    product  [L]
    product  [18]
  22 ≥ Max
    product  [28, 31]
  23 ≥ Max
    product  [14]
    product  [4]
    product  [19]
  24 ≥ Max
    product  [28, 30]
  25 ≥ Max
    product  [26, 27]
  26 ≥ Max
    product  [I]
    product  [25]
    product  [17]
  27 ≥ Max
    product  [25]
    product  [L]
  28 ≥ Max
    product  [L]
    product  [24]
    product  [22]
    product  [18]
  29 ≥ Max
    product  [I]
  30 ≥ Max
    product  [24]
    product  [2]
  31 ≥ Max
    product  [22]
    product  [3]
  32 ≥ Max
    product  [L]
  33 ≥ Max
    product  [18]
  34 ≥ Max
    product  [17]
  35 ≥ Max
    product  [18]
  36 ≥ Max
    product  [17]
  37 ≥ Max
    product  [L]
  38 ≥ Max
    product  [3]
  39 ≥ Max
    product  [2]
  40 ≥ Max
    product  [I]

#######################
# Deferred equalities #
#######################

5 -> S n ~ S n
5 -> S Z ~ S Z

  -> iteration 1

######################
# Unsatisfiable core #
######################

L ≥ Sum
  product  [I]

error: inconsistent constraints
